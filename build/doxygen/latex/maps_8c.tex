\hypertarget{maps_8c}{\section{src/cbor/maps.c File Reference}
\label{maps_8c}\index{src/cbor/maps.\-c@{src/cbor/maps.\-c}}
}
{\ttfamily \#include \char`\"{}maps.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
size\-\_\-t \hyperlink{maps_8c_a1bbbee9c6f1eaa0ff4c19559fe109baf}{cbor\-\_\-map\-\_\-size} (const \hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$item)
\begin{DoxyCompactList}\small\item\em Get the number of pairs. \end{DoxyCompactList}\item 
size\-\_\-t \hyperlink{maps_8c_a3bf8e5779a3f1311b9b3f9e0a4e4f37e}{cbor\-\_\-map\-\_\-allocated} (const \hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$item)
\begin{DoxyCompactList}\small\item\em Get the size of the allocated storage. \end{DoxyCompactList}\item 
\hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$ \hyperlink{maps_8c_adab3c6ff2e51dcf2637567431cc6e76e}{cbor\-\_\-new\-\_\-definite\-\_\-map} (size\-\_\-t size)
\begin{DoxyCompactList}\small\item\em Create a new definite map. \end{DoxyCompactList}\item 
\hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$ \hyperlink{maps_8c_a58ac69227f48815754651e93d15a5051}{cbor\-\_\-new\-\_\-indefinite\-\_\-map} ()
\begin{DoxyCompactList}\small\item\em Create a new indefinite map. \end{DoxyCompactList}\item 
bool \hyperlink{maps_8c_a64c91e7ecba7cf7d0d4949153d681db8}{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-key} (\hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$item, \hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$key)
\begin{DoxyCompactList}\small\item\em Add a key to the map. \end{DoxyCompactList}\item 
bool \hyperlink{maps_8c_abb15486eebcd1c41c373613757505705}{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-value} (\hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$item, \hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$value)
\begin{DoxyCompactList}\small\item\em Add a value to the map. \end{DoxyCompactList}\item 
bool \hyperlink{maps_8c_af077a30d8258ab02307c24af28036fca}{cbor\-\_\-map\-\_\-add} (\hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$item, struct \hyperlink{structcbor__pair}{cbor\-\_\-pair} pair)
\begin{DoxyCompactList}\small\item\em Add a pair to the map. \end{DoxyCompactList}\item 
bool \hyperlink{maps_8c_a0dccaa76ac293bb5a11dbca6d16f6253}{cbor\-\_\-map\-\_\-is\-\_\-definite} (const \hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$item)
\begin{DoxyCompactList}\small\item\em Is this map definite? \end{DoxyCompactList}\item 
bool \hyperlink{maps_8c_a941462383a3c8a6e3a60be9778cd1913}{cbor\-\_\-map\-\_\-is\-\_\-indefinite} (const \hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$item)
\begin{DoxyCompactList}\small\item\em Is this map indefinite? \end{DoxyCompactList}\item 
struct \hyperlink{structcbor__pair}{cbor\-\_\-pair} $\ast$ \hyperlink{maps_8c_a4cadc8eb7ae7ff8d3f73482fb24455c9}{cbor\-\_\-map\-\_\-handle} (const \hyperlink{structcbor__item__t}{cbor\-\_\-item\-\_\-t} $\ast$item)
\begin{DoxyCompactList}\small\item\em Get the pairs storage. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{maps_8c_a64c91e7ecba7cf7d0d4949153d681db8}{\index{maps.\-c@{maps.\-c}!\-\_\-cbor\-\_\-map\-\_\-add\-\_\-key@{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-key}}
\index{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-key@{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-key}!maps.c@{maps.\-c}}
\subsubsection[{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-key}]{\setlength{\rightskip}{0pt plus 5cm}bool \-\_\-cbor\-\_\-map\-\_\-add\-\_\-key (
\begin{DoxyParamCaption}
\item[{{\bf cbor\-\_\-item\-\_\-t} $\ast$}]{item, }
\item[{{\bf cbor\-\_\-item\-\_\-t} $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{maps_8c_a64c91e7ecba7cf7d0d4949153d681db8}


Add a key to the map. 

Sets the value to {\ttfamily N\-U\-L\-L}. Internal A\-P\-I.


\begin{DoxyParams}{Parameters}
{\em item\mbox{[}borrow\mbox{]}} & A map \\
\hline
{\em key\mbox{[}incref\mbox{]}} & The key \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily true} on success, {\ttfamily false} if either reallocation failed or the preallcoated storage is full 
\end{DoxyReturn}


Definition at line 64 of file maps.\-c.

\hypertarget{maps_8c_abb15486eebcd1c41c373613757505705}{\index{maps.\-c@{maps.\-c}!\-\_\-cbor\-\_\-map\-\_\-add\-\_\-value@{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-value}}
\index{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-value@{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-value}!maps.c@{maps.\-c}}
\subsubsection[{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-value}]{\setlength{\rightskip}{0pt plus 5cm}bool \-\_\-cbor\-\_\-map\-\_\-add\-\_\-value (
\begin{DoxyParamCaption}
\item[{{\bf cbor\-\_\-item\-\_\-t} $\ast$}]{item, }
\item[{{\bf cbor\-\_\-item\-\_\-t} $\ast$}]{value}
\end{DoxyParamCaption}
)}}\label{maps_8c_abb15486eebcd1c41c373613757505705}


Add a value to the map. 

Assumes that \hyperlink{maps_8h_a64c91e7ecba7cf7d0d4949153d681db8}{\-\_\-cbor\-\_\-map\-\_\-add\-\_\-key} has been called. Internal A\-P\-I.


\begin{DoxyParams}{Parameters}
{\em item\mbox{[}borrow\mbox{]}} & A map \\
\hline
{\em key\mbox{[}incref\mbox{]}} & The value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily true} on success, {\ttfamily false} if either reallocation failed or the preallcoated storage is full 
\end{DoxyReturn}


Definition at line 95 of file maps.\-c.

\hypertarget{maps_8c_af077a30d8258ab02307c24af28036fca}{\index{maps.\-c@{maps.\-c}!cbor\-\_\-map\-\_\-add@{cbor\-\_\-map\-\_\-add}}
\index{cbor\-\_\-map\-\_\-add@{cbor\-\_\-map\-\_\-add}!maps.c@{maps.\-c}}
\subsubsection[{cbor\-\_\-map\-\_\-add}]{\setlength{\rightskip}{0pt plus 5cm}bool cbor\-\_\-map\-\_\-add (
\begin{DoxyParamCaption}
\item[{{\bf cbor\-\_\-item\-\_\-t} $\ast$}]{item, }
\item[{struct {\bf cbor\-\_\-pair}}]{pair}
\end{DoxyParamCaption}
)}}\label{maps_8c_af077a30d8258ab02307c24af28036fca}


Add a pair to the map. 

For definite maps, items can only be added to the preallocated space. For indefinite maps, the storage will be expanded as needed


\begin{DoxyParams}{Parameters}
{\em item\mbox{[}borrow\mbox{]}} & A map \\
\hline
{\em pair\mbox{[}incref\mbox{]}} & The key-\/value pair to add (incref is member-\/wise) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily true} on success, {\ttfamily false} if either reallocation failed or the preallcoated storage is full 
\end{DoxyReturn}


Definition at line 107 of file maps.\-c.

\hypertarget{maps_8c_a3bf8e5779a3f1311b9b3f9e0a4e4f37e}{\index{maps.\-c@{maps.\-c}!cbor\-\_\-map\-\_\-allocated@{cbor\-\_\-map\-\_\-allocated}}
\index{cbor\-\_\-map\-\_\-allocated@{cbor\-\_\-map\-\_\-allocated}!maps.c@{maps.\-c}}
\subsubsection[{cbor\-\_\-map\-\_\-allocated}]{\setlength{\rightskip}{0pt plus 5cm}size\-\_\-t cbor\-\_\-map\-\_\-allocated (
\begin{DoxyParamCaption}
\item[{const {\bf cbor\-\_\-item\-\_\-t} $\ast$}]{item}
\end{DoxyParamCaption}
)}}\label{maps_8c_a3bf8e5779a3f1311b9b3f9e0a4e4f37e}


Get the size of the allocated storage. 


\begin{DoxyParams}{Parameters}
{\em item\mbox{[}borrow\mbox{]}} & A map \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Allocated storage size (as the number of \hyperlink{structcbor__pair}{cbor\-\_\-pair} items) 
\end{DoxyReturn}


Definition at line 16 of file maps.\-c.

\hypertarget{maps_8c_a4cadc8eb7ae7ff8d3f73482fb24455c9}{\index{maps.\-c@{maps.\-c}!cbor\-\_\-map\-\_\-handle@{cbor\-\_\-map\-\_\-handle}}
\index{cbor\-\_\-map\-\_\-handle@{cbor\-\_\-map\-\_\-handle}!maps.c@{maps.\-c}}
\subsubsection[{cbor\-\_\-map\-\_\-handle}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf cbor\-\_\-pair}$\ast$ cbor\-\_\-map\-\_\-handle (
\begin{DoxyParamCaption}
\item[{const {\bf cbor\-\_\-item\-\_\-t} $\ast$}]{item}
\end{DoxyParamCaption}
)}}\label{maps_8c_a4cadc8eb7ae7ff8d3f73482fb24455c9}


Get the pairs storage. 


\begin{DoxyParams}{Parameters}
{\em item\mbox{[}borrow\mbox{]}} & A map \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Array of \hyperlink{maps_8h_a1bbbee9c6f1eaa0ff4c19559fe109baf}{cbor\-\_\-map\-\_\-size} pairs. Manipulation is possible as long as references remain valid. 
\end{DoxyReturn}


Definition at line 126 of file maps.\-c.

\hypertarget{maps_8c_a0dccaa76ac293bb5a11dbca6d16f6253}{\index{maps.\-c@{maps.\-c}!cbor\-\_\-map\-\_\-is\-\_\-definite@{cbor\-\_\-map\-\_\-is\-\_\-definite}}
\index{cbor\-\_\-map\-\_\-is\-\_\-definite@{cbor\-\_\-map\-\_\-is\-\_\-definite}!maps.c@{maps.\-c}}
\subsubsection[{cbor\-\_\-map\-\_\-is\-\_\-definite}]{\setlength{\rightskip}{0pt plus 5cm}bool cbor\-\_\-map\-\_\-is\-\_\-definite (
\begin{DoxyParamCaption}
\item[{const {\bf cbor\-\_\-item\-\_\-t} $\ast$}]{item}
\end{DoxyParamCaption}
)}}\label{maps_8c_a0dccaa76ac293bb5a11dbca6d16f6253}


Is this map definite? 


\begin{DoxyParams}{Parameters}
{\em item\mbox{[}borrow\mbox{]}} & A map \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Is this map definite? 
\end{DoxyReturn}


Definition at line 115 of file maps.\-c.

\hypertarget{maps_8c_a941462383a3c8a6e3a60be9778cd1913}{\index{maps.\-c@{maps.\-c}!cbor\-\_\-map\-\_\-is\-\_\-indefinite@{cbor\-\_\-map\-\_\-is\-\_\-indefinite}}
\index{cbor\-\_\-map\-\_\-is\-\_\-indefinite@{cbor\-\_\-map\-\_\-is\-\_\-indefinite}!maps.c@{maps.\-c}}
\subsubsection[{cbor\-\_\-map\-\_\-is\-\_\-indefinite}]{\setlength{\rightskip}{0pt plus 5cm}bool cbor\-\_\-map\-\_\-is\-\_\-indefinite (
\begin{DoxyParamCaption}
\item[{const {\bf cbor\-\_\-item\-\_\-t} $\ast$}]{item}
\end{DoxyParamCaption}
)}}\label{maps_8c_a941462383a3c8a6e3a60be9778cd1913}


Is this map indefinite? 


\begin{DoxyParams}{Parameters}
{\em item\mbox{[}borrow\mbox{]}} & A map \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Is this map indefinite? 
\end{DoxyReturn}


Definition at line 121 of file maps.\-c.

\hypertarget{maps_8c_a1bbbee9c6f1eaa0ff4c19559fe109baf}{\index{maps.\-c@{maps.\-c}!cbor\-\_\-map\-\_\-size@{cbor\-\_\-map\-\_\-size}}
\index{cbor\-\_\-map\-\_\-size@{cbor\-\_\-map\-\_\-size}!maps.c@{maps.\-c}}
\subsubsection[{cbor\-\_\-map\-\_\-size}]{\setlength{\rightskip}{0pt plus 5cm}size\-\_\-t cbor\-\_\-map\-\_\-size (
\begin{DoxyParamCaption}
\item[{const {\bf cbor\-\_\-item\-\_\-t} $\ast$}]{item}
\end{DoxyParamCaption}
)}}\label{maps_8c_a1bbbee9c6f1eaa0ff4c19559fe109baf}


Get the number of pairs. 


\begin{DoxyParams}{Parameters}
{\em item\mbox{[}borrow\mbox{]}} & A map \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number of pairs 
\end{DoxyReturn}


Definition at line 10 of file maps.\-c.

\hypertarget{maps_8c_adab3c6ff2e51dcf2637567431cc6e76e}{\index{maps.\-c@{maps.\-c}!cbor\-\_\-new\-\_\-definite\-\_\-map@{cbor\-\_\-new\-\_\-definite\-\_\-map}}
\index{cbor\-\_\-new\-\_\-definite\-\_\-map@{cbor\-\_\-new\-\_\-definite\-\_\-map}!maps.c@{maps.\-c}}
\subsubsection[{cbor\-\_\-new\-\_\-definite\-\_\-map}]{\setlength{\rightskip}{0pt plus 5cm}{\bf cbor\-\_\-item\-\_\-t}$\ast$ cbor\-\_\-new\-\_\-definite\-\_\-map (
\begin{DoxyParamCaption}
\item[{const size\-\_\-t}]{size}
\end{DoxyParamCaption}
)}}\label{maps_8c_adab3c6ff2e51dcf2637567431cc6e76e}


Create a new definite map. 


\begin{DoxyParams}{Parameters}
{\em size} & The number of slots to preallocate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\bfseries new} definite map. {\ttfamily N\-U\-L\-L} on malloc failure. 
\end{DoxyReturn}


Definition at line 22 of file maps.\-c.

\hypertarget{maps_8c_a58ac69227f48815754651e93d15a5051}{\index{maps.\-c@{maps.\-c}!cbor\-\_\-new\-\_\-indefinite\-\_\-map@{cbor\-\_\-new\-\_\-indefinite\-\_\-map}}
\index{cbor\-\_\-new\-\_\-indefinite\-\_\-map@{cbor\-\_\-new\-\_\-indefinite\-\_\-map}!maps.c@{maps.\-c}}
\subsubsection[{cbor\-\_\-new\-\_\-indefinite\-\_\-map}]{\setlength{\rightskip}{0pt plus 5cm}{\bf cbor\-\_\-item\-\_\-t}$\ast$ cbor\-\_\-new\-\_\-indefinite\-\_\-map (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{maps_8c_a58ac69227f48815754651e93d15a5051}


Create a new indefinite map. 


\begin{DoxyParams}{Parameters}
{\em size} & The number of slots to preallocate \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\bfseries new} definite map. {\ttfamily N\-U\-L\-L} on malloc failure. 
\end{DoxyReturn}


Definition at line 44 of file maps.\-c.

